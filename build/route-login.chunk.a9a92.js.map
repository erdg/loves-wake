{"version":3,"sources":["webpack:///route-login.chunk.a9a92.js","webpack:///./node_modules/validator/lib/isEmail.js","webpack:///./node_modules/validator/lib/isByteLength.js","webpack:///./node_modules/validator/lib/util/merge.js","webpack:///./routes/login/components/login-form-inputs.js","webpack:///./routes/login/components/login-form.js","webpack:///./routes/login/components/login-form-container.js","webpack:///./routes/login/index.js","webpack:///./node_modules/validator/lib/isFQDN.js","webpack:///./node_modules/validator/lib/util/assertString.js"],"names":["webpackJsonp","2LX0","module","exports","__webpack_require__","_interopRequireDefault","obj","__esModule","default","isEmail","str","options","_assertString2","_merge2","default_email_options","require_display_name","allow_display_name","display_email","match","displayName","parts","split","domain","pop","user","join","lower_domain","toLowerCase","replace","_isByteLength2","max","_isFQDN2","require_tld","slice","length","allow_utf8_local_part","quotedEmailUserUtf8","test","quotedEmailUser","pattern","emailUserUtf8Part","emailUserPart","user_parts","i","Object","defineProperty","value","_assertString","_merge","_isByteLength","_isFQDN","CFqi","isByteLength","min","_typeof","arguments","len","encodeURI","Symbol","iterator","constructor","prototype","LLCR","merge","undefined","defaults","key","TVzt","__webpack_exports__","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","TypeError","create","enumerable","writable","configurable","setPrototypeOf","__proto__","login_form__classCallCheck","instance","Constructor","login_form__possibleConstructorReturn","login_form__inherits","login_form_container__classCallCheck","login_form_container__possibleConstructorReturn","login_form_container__inherits","login__classCallCheck","login__possibleConstructorReturn","login__inherits","preact_min","flex_container","preact_router_es","isEmail_default","n","classnames","classnames_default","_ref","class","login_form_inputs_EmailInput","props","email","onChange","handleEmailChange","type","placeholder","_ref2","_ref3","login_form_inputs_PasswordInput","_Component","PasswordInput","this","apply","render","password","handlePasswordChange","showPassword","onClick","toggleShowPassword","toast","login_form__ref","login_form_LoginForm","LoginForm","formClasses","has-error","emailError","passwordError","loginBtnClasses","loading","loginBtnLoading","recoverBtnClasses","recoverBtnLoading","emailHintClasses","d-hide","passwordHintClasses","error","active","showServerError","serverError","handleLogin","handleRecoverAccount","login_form_container_LoginFormContainer","LoginFormContainer","_this","_handleLogin","state","setState","fetch","then","resp","json","token","loginSuccess","handleLoginSuccess","_handleRecoverAccount","recoverAccountSuccess","handleRecoverAccountSuccess","_handleEmailChange","bind","_handlePasswordChange","_toggleShowPassword","e","target","login_Login","Login","formRail","cddD","isFQDN","default_fqdn_options","allow_trailing_dot","substring","tld","part","allow_underscores","fcJk","assertString","input","String"],"mappings":"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","file":"route-login.chunk.a9a92.js","sourcesContent":["webpackJsonp([1],{\n\n/***/ \"2LX0\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isEmail;\n\nvar _assertString = __webpack_require__(\"fcJk\");\n\nvar _assertString2 = _interopRequireDefault(_assertString);\n\nvar _merge = __webpack_require__(\"LLCR\");\n\nvar _merge2 = _interopRequireDefault(_merge);\n\nvar _isByteLength = __webpack_require__(\"CFqi\");\n\nvar _isByteLength2 = _interopRequireDefault(_isByteLength);\n\nvar _isFQDN = __webpack_require__(\"cddD\");\n\nvar _isFQDN2 = _interopRequireDefault(_isFQDN);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\nvar default_email_options = {\n  allow_display_name: false,\n  require_display_name: false,\n  allow_utf8_local_part: true,\n  require_tld: true\n};\n\n/* eslint-disable max-len */\n/* eslint-disable no-control-regex */\nvar displayName = /^[a-z\\d!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~\\.\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+[a-z\\d!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~\\,\\.\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\s]*<(.+)>$/i;\nvar emailUserPart = /^[a-z\\d!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]+$/i;\nvar quotedEmailUser = /^([\\s\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f\\x21\\x23-\\x5b\\x5d-\\x7e]|(\\\\[\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]))*$/i;\nvar emailUserUtf8Part = /^[a-z\\d!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+$/i;\nvar quotedEmailUserUtf8 = /^([\\s\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f\\x21\\x23-\\x5b\\x5d-\\x7e\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]|(\\\\[\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))*$/i;\n/* eslint-enable max-len */\n/* eslint-enable no-control-regex */\n\nfunction isEmail(str, options) {\n  (0, _assertString2.default)(str);\n  options = (0, _merge2.default)(options, default_email_options);\n\n  if (options.require_display_name || options.allow_display_name) {\n    var display_email = str.match(displayName);\n    if (display_email) {\n      str = display_email[1];\n    } else if (options.require_display_name) {\n      return false;\n    }\n  }\n\n  var parts = str.split('@');\n  var domain = parts.pop();\n  var user = parts.join('@');\n\n  var lower_domain = domain.toLowerCase();\n  if (lower_domain === 'gmail.com' || lower_domain === 'googlemail.com') {\n    user = user.replace(/\\./g, '').toLowerCase();\n  }\n\n  if (!(0, _isByteLength2.default)(user, { max: 64 }) || !(0, _isByteLength2.default)(domain, { max: 254 })) {\n    return false;\n  }\n\n  if (!(0, _isFQDN2.default)(domain, { require_tld: options.require_tld })) {\n    return false;\n  }\n\n  if (user[0] === '\"') {\n    user = user.slice(1, user.length - 1);\n    return options.allow_utf8_local_part ? quotedEmailUserUtf8.test(user) : quotedEmailUser.test(user);\n  }\n\n  var pattern = options.allow_utf8_local_part ? emailUserUtf8Part : emailUserPart;\n\n  var user_parts = user.split('.');\n  for (var i = 0; i < user_parts.length; i++) {\n    if (!pattern.test(user_parts[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\nmodule.exports = exports['default'];\n\n/***/ }),\n\n/***/ \"CFqi\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) {\n  return typeof obj;\n} : function (obj) {\n  return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj;\n};\n\nexports.default = isByteLength;\n\nvar _assertString = __webpack_require__(\"fcJk\");\n\nvar _assertString2 = _interopRequireDefault(_assertString);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\n/* eslint-disable prefer-rest-params */\nfunction isByteLength(str, options) {\n  (0, _assertString2.default)(str);\n  var min = void 0;\n  var max = void 0;\n  if ((typeof options === 'undefined' ? 'undefined' : _typeof(options)) === 'object') {\n    min = options.min || 0;\n    max = options.max;\n  } else {\n    // backwards compatibility: isByteLength(str, min [, max])\n    min = arguments[1];\n    max = arguments[2];\n  }\n  var len = encodeURI(str).split(/%..|./).length - 1;\n  return len >= min && (typeof max === 'undefined' || len <= max);\n}\nmodule.exports = exports['default'];\n\n/***/ }),\n\n/***/ \"LLCR\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = merge;\nfunction merge() {\n  var obj = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var defaults = arguments[1];\n\n  for (var key in defaults) {\n    if (typeof obj[key] === 'undefined') {\n      obj[key] = defaults[key];\n    }\n  }\n  return obj;\n}\nmodule.exports = exports['default'];\n\n/***/ }),\n\n/***/ \"TVzt\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./node_modules/preact/dist/preact.min.js\nvar preact_min = __webpack_require__(\"EBst\");\nvar preact_min_default = /*#__PURE__*/__webpack_require__.n(preact_min);\n\n// EXTERNAL MODULE: ./components/flex-container/index.js\nvar flex_container = __webpack_require__(\"o5xd\");\n\n// EXTERNAL MODULE: ./node_modules/preact-router/dist/preact-router.es.js\nvar preact_router_es = __webpack_require__(\"y+SO\");\n\n// EXTERNAL MODULE: ./node_modules/validator/lib/isEmail.js\nvar isEmail = __webpack_require__(\"2LX0\");\nvar isEmail_default = /*#__PURE__*/__webpack_require__.n(isEmail);\n\n// EXTERNAL MODULE: ./node_modules/classnames/index.js\nvar classnames = __webpack_require__(\"HW6M\");\nvar classnames_default = /*#__PURE__*/__webpack_require__.n(classnames);\n\n// EXTERNAL MODULE: ./components/dialog.js\nvar dialog = __webpack_require__(\"wI7h\");\n\n// CONCATENATED MODULE: ./routes/login/components/login-form-inputs.js\n\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\nvar _ref = Object(preact_min[\"h\"])(\n   'label',\n   { 'class': 'form-label' },\n   'Email'\n);\n\nvar login_form_inputs_EmailInput = function EmailInput(props) {\n   return Object(preact_min[\"h\"])(\n      'div',\n      null,\n      _ref,\n      Object(preact_min[\"h\"])('input', {\n         value: props.email,\n         onChange: props.handleEmailChange,\n         type: 'email',\n         'class': 'form-input',\n         placeholder: 'Your email'\n      })\n   );\n};\n\nvar _ref2 = Object(preact_min[\"h\"])(\n   'label',\n   { 'class': 'form-label' },\n   'Password'\n);\n\nvar _ref3 = Object(preact_min[\"h\"])('i', { 'class': 'form-icon' });\n\nvar login_form_inputs_PasswordInput = function (_Component) {\n   _inherits(PasswordInput, _Component);\n\n   function PasswordInput() {\n      _classCallCheck(this, PasswordInput);\n\n      return _possibleConstructorReturn(this, _Component.apply(this, arguments));\n   }\n\n   PasswordInput.prototype.render = function render(props) {\n      return Object(preact_min[\"h\"])(\n         'div',\n         null,\n         _ref2,\n         Object(preact_min[\"h\"])('input', {\n            value: props.password,\n            onChange: props.handlePasswordChange,\n            'class': 'form-input',\n            type: props.showPassword ? \"text\" : \"password\",\n            placeholder: 'Your password'\n         }),\n         Object(preact_min[\"h\"])(\n            'label',\n            { 'class': 'form-switch' },\n            Object(preact_min[\"h\"])('input', { type: 'checkbox',\n               onClick: props.toggleShowPassword\n            }),\n            _ref3,\n            'Show password'\n         )\n      );\n   };\n\n   return PasswordInput;\n}(preact_min[\"Component\"]);\n\n\n// EXTERNAL MODULE: ./components/toast.js\nvar toast = __webpack_require__(\"r33O\");\n\n// CONCATENATED MODULE: ./routes/login/components/login-form.js\n\n\nfunction login_form__classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction login_form__possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction login_form__inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\n\nvar login_form__ref = Object(preact_min[\"h\"])(\n   'h1',\n   null,\n   'Login'\n);\n\nvar login_form_LoginForm = function (_Component) {\n   login_form__inherits(LoginForm, _Component);\n\n   function LoginForm() {\n      login_form__classCallCheck(this, LoginForm);\n\n      return login_form__possibleConstructorReturn(this, _Component.apply(this, arguments));\n   }\n\n   LoginForm.prototype.render = function render(props) {\n\n      var formClasses = classnames_default()('form-group', { 'has-error': props.emailError || props.passwordError });\n\n      var loginBtnClasses = classnames_default()('btn', 'btn-primary', { 'loading': props.loginBtnLoading });\n\n      var recoverBtnClasses = classnames_default()('btn', 'btn-link', 'float-right', { 'loading': props.recoverBtnLoading });\n\n      var emailHintClasses = classnames_default()('form-input-hint', { 'd-hide': !props.emailError });\n\n      var passwordHintClasses = classnames_default()('form-input-hint', { 'd-hide': !props.passwordError });\n\n      return Object(preact_min[\"h\"])(\n         'div',\n         { 'class': formClasses },\n         login_form__ref,\n         Object(preact_min[\"h\"])(\n            toast[\"a\" /* Toast */],\n            { error: true, active: props.showServerError },\n            props.serverError\n         ),\n         Object(preact_min[\"h\"])(login_form_inputs_EmailInput, {\n            email: props.email,\n            handleEmailChange: props.handleEmailChange\n         }),\n         Object(preact_min[\"h\"])(\n            'p',\n            { 'class': emailHintClasses },\n            'Please enter a valid email address'\n         ),\n         Object(preact_min[\"h\"])(login_form_inputs_PasswordInput, {\n            password: props.password,\n            handlePasswordChange: props.handlePasswordChange,\n            toggleShowPassword: props.toggleShowPassword,\n            showPassword: props.showPassword\n         }),\n         Object(preact_min[\"h\"])(\n            'p',\n            { 'class': passwordHintClasses },\n            'Gotta have a password to login...'\n         ),\n         Object(preact_min[\"h\"])(\n            'div',\n            { 'class': 'row' },\n            Object(preact_min[\"h\"])(\n               'button',\n               {\n                  'class': loginBtnClasses,\n                  onClick: props.handleLogin\n               },\n               'Login'\n            ),\n            Object(preact_min[\"h\"])(\n               'button',\n               {\n                  'class': recoverBtnClasses,\n                  onClick: props.handleRecoverAccount\n               },\n               'Recover account'\n            )\n         )\n      );\n   };\n\n   return LoginForm;\n}(preact_min[\"Component\"]);\n\n\n// CONCATENATED MODULE: ./routes/login/components/login-form-container.js\n\n\nfunction login_form_container__classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction login_form_container__possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction login_form_container__inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\nvar login_form_container_LoginFormContainer = function (_Component) {\n   login_form_container__inherits(LoginFormContainer, _Component);\n\n   function LoginFormContainer(props) {\n      login_form_container__classCallCheck(this, LoginFormContainer);\n\n      // this._handleLogin = this._handleLogin.bind(this);\n      var _this = login_form_container__possibleConstructorReturn(this, _Component.call(this, props));\n\n      _this._handleLogin = function () {\n         // if not valid email address\n         if (!isEmail_default()(_this.state.email)) {\n            // throw email error, don't submit\n            _this.setState({ emailError: true });\n            return;\n         } else {\n            _this.setState({ emailError: false });\n         }\n\n         // make sure there's a password\n         if (!_this.state.password) {\n            _this.setState({ passwordError: true });\n            return;\n         } else {\n            _this.setState({ passwordError: false });\n         }\n\n         // loading spinner on button\n         _this.setState({ loginBtnLoading: true });\n\n         fetch(\"https://erikdgustafson.com/api/!loginUser?\" + _this.state.email + \"&\" + _this.state.password).then(function (resp) {\n            return resp.json();\n         }).then(function (json) {\n            if (json.error) {\n               _this.setState({\n                  // display errors and remove loading spinner\n                  serverError: json.error,\n                  showServerError: true,\n                  loginBtnLoading: false\n               });\n            } else if (json.token) {\n               // remove loading spinner\n               // set loginSuccess flag to true to trigger route change to 'Profile'\n               // FIXME - the above feels like a hack. \n               // might be time to add a redux-style store?\n               _this.setState({ loginBtnLoading: false, loginSuccess: true });\n               // send event up to set global app state with logged in user\n               _this.props.handleLoginSuccess(json.user, json.token);\n            }\n         }).then(function () {\n            if (_this.state.loginSuccess) {\n               Object(preact_router_es[\"c\" /* route */])('/profile', true);\n            }\n         });\n\n         // clear password\n         _this.setState({ password: '' });\n      };\n\n      _this._handleRecoverAccount = function () {\n         // loading spinner on button\n         _this.setState({ recoverBtnLoading: true });\n\n         fetch(\"https://erikdgustafson.com/api/!recoverUserAccount?\" + _this.state.email).then(function (resp) {\n            return resp.json();\n         }).then(function (json) {\n            if (json.error) {\n               _this.setState({\n                  // display errors and remove loading spinner\n                  serverError: json.error,\n                  showServerError: true,\n                  recoverBtnLoading: false\n               });\n            } else if (json.email) {\n               // remove loading spinner\n               // set loginSuccess flag to true to trigger route change to 'Profile'\n               // FIXME - the above feels like a hack. \n               // might be time to add a redux-style store?\n               _this.setState({ recoverBtnLoading: false, recoverAccountSuccess: true });\n               // send event up to set global app state with logged in user\n               _this.props.handleRecoverAccountSuccess(json.email);\n            }\n         }).then(function () {\n            if (_this.state.recoverAccountSuccess) {\n               Object(preact_router_es[\"c\" /* route */])('/recover-account', true);\n            }\n         });\n      };\n\n      _this._handleEmailChange = _this._handleEmailChange.bind(_this);\n      _this._handlePasswordChange = _this._handlePasswordChange.bind(_this);\n      _this._toggleShowPassword = _this._toggleShowPassword.bind(_this);\n      _this.state = {\n         email: '',\n         emailError: false,\n         password: '',\n         passwordError: false,\n         showPassword: false,\n         serverError: '',\n         showServerError: false,\n         loginBtnLoading: false,\n         recoverBtnLoading: false,\n         loginSuccess: false,\n         recoverAccountSuccess: false\n      };\n      return _this;\n   }\n\n   LoginFormContainer.prototype._toggleShowPassword = function _toggleShowPassword() {\n      var showPassword = !this.state.showPassword;\n      this.setState({ showPassword: showPassword });\n   };\n\n   LoginFormContainer.prototype._handleEmailChange = function _handleEmailChange(e) {\n      this.setState({ email: e.target.value });\n   };\n\n   LoginFormContainer.prototype._handlePasswordChange = function _handlePasswordChange(e) {\n      this.setState({ password: e.target.value });\n   };\n\n   LoginFormContainer.prototype.render = function render() {\n      return Object(preact_min[\"h\"])(login_form_LoginForm, {\n\n         serverError: this.state.serverError,\n         showServerError: this.state.showServerError,\n\n         email: this.state.email,\n         emailError: this.state.emailError,\n         handleEmailChange: this._handleEmailChange,\n\n         password: this.state.password,\n         passwordError: this.state.passwordError,\n         handlePasswordChange: this._handlePasswordChange,\n\n         toggleShowPassword: this._toggleShowPassword,\n         showPassword: this.state.showPassword,\n\n         handleLogin: this._handleLogin,\n\n         loginBtnLoading: this.state.loginBtnLoading,\n         recoverBtnLoading: this.state.recoverBtnLoading,\n\n         handleRecoverAccount: this._handleRecoverAccount\n\n      });\n   };\n\n   return LoginFormContainer;\n}(preact_min[\"Component\"]);\n\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib?{\"babelrc\":false,\"presets\":[[\"/home/erik/loves-wake/node_modules/babel-preset-env/lib/index.js\",{\"loose\":true,\"uglify\":true,\"modules\":false,\"targets\":{\"browsers\":[\"> 1%\",\"last 2 versions\",\"IE >= 9\"]},\"exclude\":[\"transform-regenerator\",\"transform-es2015-typeof-symbol\"]}],\"/home/erik/loves-wake/node_modules/babel-preset-stage-1/lib/index.js\"],\"plugins\":[\"/home/erik/loves-wake/node_modules/babel-plugin-transform-object-assign/lib/index.js\",\"/home/erik/loves-wake/node_modules/babel-plugin-transform-decorators-legacy/lib/index.js\",\"/home/erik/loves-wake/node_modules/babel-plugin-transform-react-constant-elements/lib/index.js\",\"/home/erik/loves-wake/node_modules/babel-plugin-transform-react-remove-prop-types/lib/index.js\",[\"/home/erik/loves-wake/node_modules/babel-plugin-transform-react-jsx/lib/index.js\",{\"pragma\":\"h\"}],[\"/home/erik/loves-wake/node_modules/babel-plugin-jsx-pragmatic/jsx-pragmatic.js\",{\"module\":\"preact\",\"export\":\"h\",\"import\":\"h\"}]]}!./routes/login/index.js\n\n\nfunction login__classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction login__possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction login__inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\nvar login_Login = function (_Component) {\n   login__inherits(Login, _Component);\n\n   function Login() {\n      login__classCallCheck(this, Login);\n\n      return login__possibleConstructorReturn(this, _Component.apply(this, arguments));\n   }\n\n   Login.prototype.render = function render(props) {\n      return Object(preact_min[\"h\"])(flex_container[\"a\" /* FlexContainer */], {\n         formRail: Object(preact_min[\"h\"])(login_form_container_LoginFormContainer, {\n            handleLoginSuccess: function handleLoginSuccess(user, token) {\n               return props.handleLoginSuccess(user, token);\n            },\n            handleRecoverAccountSuccess: function handleRecoverAccountSuccess(email) {\n               return props.handleRecoverAccountSuccess(email);\n            }\n         })\n      });\n   };\n\n   return Login;\n}(preact_min[\"Component\"]);\n\n/* harmony default export */ var login = __webpack_exports__[\"default\"] = (login_Login);\n\n/***/ }),\n\n/***/ \"cddD\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isFQDN;\n\nvar _assertString = __webpack_require__(\"fcJk\");\n\nvar _assertString2 = _interopRequireDefault(_assertString);\n\nvar _merge = __webpack_require__(\"LLCR\");\n\nvar _merge2 = _interopRequireDefault(_merge);\n\nfunction _interopRequireDefault(obj) {\n  return obj && obj.__esModule ? obj : { default: obj };\n}\n\nvar default_fqdn_options = {\n  require_tld: true,\n  allow_underscores: false,\n  allow_trailing_dot: false\n};\n\nfunction isFQDN(str, options) {\n  (0, _assertString2.default)(str);\n  options = (0, _merge2.default)(options, default_fqdn_options);\n\n  /* Remove the optional trailing dot before checking validity */\n  if (options.allow_trailing_dot && str[str.length - 1] === '.') {\n    str = str.substring(0, str.length - 1);\n  }\n  var parts = str.split('.');\n  if (options.require_tld) {\n    var tld = parts.pop();\n    if (!parts.length || !/^([a-z\\u00a1-\\uffff]{2,}|xn[a-z0-9-]{2,})$/i.test(tld)) {\n      return false;\n    }\n    // disallow spaces\n    if (/[\\s\\u2002-\\u200B\\u202F\\u205F\\u3000\\uFEFF\\uDB40\\uDC20]/.test(tld)) {\n      return false;\n    }\n  }\n  for (var part, i = 0; i < parts.length; i++) {\n    part = parts[i];\n    if (options.allow_underscores) {\n      part = part.replace(/_/g, '');\n    }\n    if (!/^[a-z\\u00a1-\\uffff0-9-]+$/i.test(part)) {\n      return false;\n    }\n    // disallow full-width chars\n    if (/[\\uff01-\\uff5e]/.test(part)) {\n      return false;\n    }\n    if (part[0] === '-' || part[part.length - 1] === '-') {\n      return false;\n    }\n  }\n  return true;\n}\nmodule.exports = exports['default'];\n\n/***/ }),\n\n/***/ \"fcJk\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\"use strict\";\n\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = assertString;\nfunction assertString(input) {\n  var isString = typeof input === 'string' || input instanceof String;\n\n  if (!isString) {\n    throw new TypeError('This library (validator.js) validates strings only');\n  }\n}\nmodule.exports = exports['default'];\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// route-login.chunk.a9a92.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isEmail;\n\nvar _assertString = require('./util/assertString');\n\nvar _assertString2 = _interopRequireDefault(_assertString);\n\nvar _merge = require('./util/merge');\n\nvar _merge2 = _interopRequireDefault(_merge);\n\nvar _isByteLength = require('./isByteLength');\n\nvar _isByteLength2 = _interopRequireDefault(_isByteLength);\n\nvar _isFQDN = require('./isFQDN');\n\nvar _isFQDN2 = _interopRequireDefault(_isFQDN);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar default_email_options = {\n  allow_display_name: false,\n  require_display_name: false,\n  allow_utf8_local_part: true,\n  require_tld: true\n};\n\n/* eslint-disable max-len */\n/* eslint-disable no-control-regex */\nvar displayName = /^[a-z\\d!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~\\.\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+[a-z\\d!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~\\,\\.\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\s]*<(.+)>$/i;\nvar emailUserPart = /^[a-z\\d!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]+$/i;\nvar quotedEmailUser = /^([\\s\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f\\x21\\x23-\\x5b\\x5d-\\x7e]|(\\\\[\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]))*$/i;\nvar emailUserUtf8Part = /^[a-z\\d!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+$/i;\nvar quotedEmailUserUtf8 = /^([\\s\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f\\x21\\x23-\\x5b\\x5d-\\x7e\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]|(\\\\[\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))*$/i;\n/* eslint-enable max-len */\n/* eslint-enable no-control-regex */\n\nfunction isEmail(str, options) {\n  (0, _assertString2.default)(str);\n  options = (0, _merge2.default)(options, default_email_options);\n\n  if (options.require_display_name || options.allow_display_name) {\n    var display_email = str.match(displayName);\n    if (display_email) {\n      str = display_email[1];\n    } else if (options.require_display_name) {\n      return false;\n    }\n  }\n\n  var parts = str.split('@');\n  var domain = parts.pop();\n  var user = parts.join('@');\n\n  var lower_domain = domain.toLowerCase();\n  if (lower_domain === 'gmail.com' || lower_domain === 'googlemail.com') {\n    user = user.replace(/\\./g, '').toLowerCase();\n  }\n\n  if (!(0, _isByteLength2.default)(user, { max: 64 }) || !(0, _isByteLength2.default)(domain, { max: 254 })) {\n    return false;\n  }\n\n  if (!(0, _isFQDN2.default)(domain, { require_tld: options.require_tld })) {\n    return false;\n  }\n\n  if (user[0] === '\"') {\n    user = user.slice(1, user.length - 1);\n    return options.allow_utf8_local_part ? quotedEmailUserUtf8.test(user) : quotedEmailUser.test(user);\n  }\n\n  var pattern = options.allow_utf8_local_part ? emailUserUtf8Part : emailUserPart;\n\n  var user_parts = user.split('.');\n  for (var i = 0; i < user_parts.length; i++) {\n    if (!pattern.test(user_parts[i])) {\n      return false;\n    }\n  }\n\n  return true;\n}\nmodule.exports = exports['default'];\n\n\n// WEBPACK FOOTER //\n// ./node_modules/validator/lib/isEmail.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\n\nvar _typeof = typeof Symbol === \"function\" && typeof Symbol.iterator === \"symbol\" ? function (obj) { return typeof obj; } : function (obj) { return obj && typeof Symbol === \"function\" && obj.constructor === Symbol && obj !== Symbol.prototype ? \"symbol\" : typeof obj; };\n\nexports.default = isByteLength;\n\nvar _assertString = require('./util/assertString');\n\nvar _assertString2 = _interopRequireDefault(_assertString);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\n/* eslint-disable prefer-rest-params */\nfunction isByteLength(str, options) {\n  (0, _assertString2.default)(str);\n  var min = void 0;\n  var max = void 0;\n  if ((typeof options === 'undefined' ? 'undefined' : _typeof(options)) === 'object') {\n    min = options.min || 0;\n    max = options.max;\n  } else {\n    // backwards compatibility: isByteLength(str, min [, max])\n    min = arguments[1];\n    max = arguments[2];\n  }\n  var len = encodeURI(str).split(/%..|./).length - 1;\n  return len >= min && (typeof max === 'undefined' || len <= max);\n}\nmodule.exports = exports['default'];\n\n\n// WEBPACK FOOTER //\n// ./node_modules/validator/lib/isByteLength.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = merge;\nfunction merge() {\n  var obj = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};\n  var defaults = arguments[1];\n\n  for (var key in defaults) {\n    if (typeof obj[key] === 'undefined') {\n      obj[key] = defaults[key];\n    }\n  }\n  return obj;\n}\nmodule.exports = exports['default'];\n\n\n// WEBPACK FOOTER //\n// ./node_modules/validator/lib/util/merge.js","import { Component } from 'preact';\n\nimport { Dialog } from '../../../components/dialog';\n\nconst EmailInput = (props) => (\n   <div>\n      <label class=\"form-label\">Email</label>\n      <input\n         value={props.email}\n         onChange={props.handleEmailChange}\n         type=\"email\"\n         class=\"form-input\" \n         placeholder=\"Your email\"\n      />\n   </div>\n)\n\nclass PasswordInput extends Component {\n\n   render (props) {\n      return (\n         <div>\n\n            <label class=\"form-label\">\n               Password\n            </label>\n            <input \n               value={ props.password }\n               onChange={ props.handlePasswordChange }\n               class=\"form-input\" \n               type={ props.showPassword ? \"text\" : \"password\" }\n               placeholder=\"Your password\"\n            />\n\n            <label class=\"form-switch\">\n               <input type=\"checkbox\" \n                  onClick={ props.toggleShowPassword } \n               />\n               <i class=\"form-icon\"></i>\n               Show password\n            </label>\n\n         </div>\n      )\n   }\n}\n\nexport { EmailInput, PasswordInput };\n\n\n\n// WEBPACK FOOTER //\n// ./routes/login/components/login-form-inputs.js","import { Component } from 'preact';\nimport classNames from 'classnames';\n\nimport { EmailInput, PasswordInput } from './login-form-inputs';\nimport { Dialog } from '../../../components/dialog';\nimport { Toast } from '../../../components/toast';\n\nclass LoginForm extends Component {\n\n   render (props) {\n\n      let formClasses = classNames(\n         'form-group', { 'has-error': props.emailError || props.passwordError }\n      );\n\n      let loginBtnClasses = classNames(\n         'btn', 'btn-primary', { 'loading': props.loginBtnLoading }\n      );\n\n      let recoverBtnClasses = classNames(\n         'btn', 'btn-link', 'float-right', { 'loading': props.recoverBtnLoading }\n      );\n\n      let emailHintClasses = classNames(\n         'form-input-hint', { 'd-hide': !props.emailError }\n      );\n\n      let passwordHintClasses = classNames(\n         'form-input-hint', { 'd-hide': !props.passwordError }\n      );\n\n      return (\n         <div class={ formClasses }>\n\n            <h1>Login</h1>\n\n            <Toast error active={props.showServerError}>\n               {props.serverError}\n            </Toast>\n\n            <EmailInput \n               email={props.email}\n               handleEmailChange={props.handleEmailChange}\n            />\n\n            <p class={ emailHintClasses }>\n               Please enter a valid email address\n            </p>\n\n            <PasswordInput \n               password={props.password}\n               handlePasswordChange={props.handlePasswordChange}\n               toggleShowPassword={ props.toggleShowPassword }\n               showPassword={ props.showPassword }\n            />\n\n            <p class={ passwordHintClasses }>\n               Gotta have a password to login...\n            </p>\n\n            <div class=\"row\">\n               <button \n                  class={ loginBtnClasses }\n                  onClick={ props.handleLogin }\n               >\n                  Login\n               </button>\n               <button \n                  class={ recoverBtnClasses }\n                  onClick={ props.handleRecoverAccount }\n               >\n                  Recover account\n               </button>\n\n            </div>\n\n         </div>\n      )\n   }\n}\n\nexport { LoginForm };\n\n\n\n// WEBPACK FOOTER //\n// ./routes/login/components/login-form.js","import { h, Component } from 'preact';\nimport { route } from 'preact-router';\nimport isEmail from 'validator/lib/isEmail';\n\nimport { LoginForm } from './login-form';\n\n\nclass LoginFormContainer extends Component { \n   constructor (props) {\n      super(props);\n      // this._handleLogin = this._handleLogin.bind(this);\n      this._handleEmailChange = this._handleEmailChange.bind(this);\n      this._handlePasswordChange = this._handlePasswordChange.bind(this);\n      this._toggleShowPassword = this._toggleShowPassword.bind(this);\n      this.state = {\n         email: '',\n         emailError: false,\n         password: '',\n         passwordError: false,\n         showPassword: false,\n         serverError: '',\n         showServerError: false,\n         loginBtnLoading: false,\n         recoverBtnLoading: false,\n         loginSuccess: false,\n         recoverAccountSuccess:false\n      };\n   }\n\n   _toggleShowPassword () {\n      let showPassword = !this.state.showPassword;\n      this.setState({ showPassword });\n   }\n\n   _handleLogin = () => {\n      // if not valid email address\n      if ( !(isEmail(this.state.email)) ) {\n         // throw email error, don't submit\n         this.setState({ emailError: true });\n         return\n      } else {\n         this.setState({ emailError: false });\n      }\n\n      // make sure there's a password\n      if (!this.state.password) {\n         this.setState({ passwordError: true });\n         return\n      } else { \n         this.setState({ passwordError: false }); \n      }\n\n      // loading spinner on button\n      this.setState({ loginBtnLoading: true });\n\n      fetch(\"https://erikdgustafson.com/api/!loginUser?\"\n         + this.state.email\n         + \"&\"\n         + this.state.password\n      )\n      .then( (resp) => {\n         return resp.json();\n      })\n      .then( (json) => {\n         if (json.error) {\n            this.setState({ \n               // display errors and remove loading spinner\n               serverError: json.error, \n               showServerError: true,\n               loginBtnLoading: false\n            });\n\n         } else if (json.token) {\n            // remove loading spinner\n            // set loginSuccess flag to true to trigger route change to 'Profile'\n            // FIXME - the above feels like a hack. \n            // might be time to add a redux-style store?\n            this.setState({ loginBtnLoading: false, loginSuccess: true});\n            // send event up to set global app state with logged in user\n            this.props.handleLoginSuccess(json.user, json.token);\n         }\n      })\n      .then( () => {\n         if (this.state.loginSuccess) {\n            route('/profile', true);\n         }\n      });\n\n      // clear password\n      this.setState({ password: '' });\n\n   }\n\n   _handleRecoverAccount = () => {\n      // loading spinner on button\n      this.setState({ recoverBtnLoading: true });\n\n      fetch(\"https://erikdgustafson.com/api/!recoverUserAccount?\"\n         + this.state.email\n      )\n      .then( (resp) => {\n         return resp.json();\n      })\n      .then( (json) => {\n         if (json.error) {\n            this.setState({ \n               // display errors and remove loading spinner\n               serverError: json.error, \n               showServerError: true,\n               recoverBtnLoading: false\n            });\n\n         } else if (json.email) {\n            // remove loading spinner\n            // set loginSuccess flag to true to trigger route change to 'Profile'\n            // FIXME - the above feels like a hack. \n            // might be time to add a redux-style store?\n            this.setState({ recoverBtnLoading: false, recoverAccountSuccess: true});\n            // send event up to set global app state with logged in user\n            this.props.handleRecoverAccountSuccess(json.email);\n         }\n      })\n      .then( () => {\n         if (this.state.recoverAccountSuccess) {\n            route('/recover-account', true);\n         }\n      });\n\n   }\n\n   _handleEmailChange (e) {\n      this.setState({ email: e.target.value });\n   }\n\n   _handlePasswordChange (e) {\n      this.setState({ password: e.target.value });\n   }\n\n   render () {\n      return (\n         <LoginForm \n\n            serverError={ this.state.serverError }\n            showServerError={ this.state.showServerError }\n\n            email={ this.state.email }\n            emailError={ this.state.emailError }\n            handleEmailChange={ this._handleEmailChange }\n\n            password={ this.state.password }\n            passwordError={ this.state.passwordError }\n            handlePasswordChange={ this._handlePasswordChange }\n\n            toggleShowPassword={ this._toggleShowPassword }\n            showPassword={ this.state.showPassword }\n\n            handleLogin={ this._handleLogin }\n\n            loginBtnLoading={ this.state.loginBtnLoading }\n            recoverBtnLoading={ this.state.recoverBtnLoading }\n\n            handleRecoverAccount={ this._handleRecoverAccount }\n\n         />\n      )\n   }\n}\n\nexport { LoginFormContainer };\n\n\n\n// WEBPACK FOOTER //\n// ./routes/login/components/login-form-container.js","import { h, Component } from 'preact';\n\nimport { FlexContainer } from '../../components/flex-container';\nimport { LoginFormContainer } from './components/login-form-container';\n\nclass Login extends Component {\n   render (props) {\n      return (\n         <FlexContainer \n            formRail={ \n               <LoginFormContainer \n                  handleLoginSuccess={ (user, token) => props.handleLoginSuccess(user, token) }\n                  handleRecoverAccountSuccess={ (email) => props.handleRecoverAccountSuccess(email) }\n               /> \n            } \n         />\n      );\n   }\n}\n\nexport default Login;\n\n\n\n\n// WEBPACK FOOTER //\n// ./routes/login/index.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = isFQDN;\n\nvar _assertString = require('./util/assertString');\n\nvar _assertString2 = _interopRequireDefault(_assertString);\n\nvar _merge = require('./util/merge');\n\nvar _merge2 = _interopRequireDefault(_merge);\n\nfunction _interopRequireDefault(obj) { return obj && obj.__esModule ? obj : { default: obj }; }\n\nvar default_fqdn_options = {\n  require_tld: true,\n  allow_underscores: false,\n  allow_trailing_dot: false\n};\n\nfunction isFQDN(str, options) {\n  (0, _assertString2.default)(str);\n  options = (0, _merge2.default)(options, default_fqdn_options);\n\n  /* Remove the optional trailing dot before checking validity */\n  if (options.allow_trailing_dot && str[str.length - 1] === '.') {\n    str = str.substring(0, str.length - 1);\n  }\n  var parts = str.split('.');\n  if (options.require_tld) {\n    var tld = parts.pop();\n    if (!parts.length || !/^([a-z\\u00a1-\\uffff]{2,}|xn[a-z0-9-]{2,})$/i.test(tld)) {\n      return false;\n    }\n    // disallow spaces\n    if (/[\\s\\u2002-\\u200B\\u202F\\u205F\\u3000\\uFEFF\\uDB40\\uDC20]/.test(tld)) {\n      return false;\n    }\n  }\n  for (var part, i = 0; i < parts.length; i++) {\n    part = parts[i];\n    if (options.allow_underscores) {\n      part = part.replace(/_/g, '');\n    }\n    if (!/^[a-z\\u00a1-\\uffff0-9-]+$/i.test(part)) {\n      return false;\n    }\n    // disallow full-width chars\n    if (/[\\uff01-\\uff5e]/.test(part)) {\n      return false;\n    }\n    if (part[0] === '-' || part[part.length - 1] === '-') {\n      return false;\n    }\n  }\n  return true;\n}\nmodule.exports = exports['default'];\n\n\n// WEBPACK FOOTER //\n// ./node_modules/validator/lib/isFQDN.js","'use strict';\n\nObject.defineProperty(exports, \"__esModule\", {\n  value: true\n});\nexports.default = assertString;\nfunction assertString(input) {\n  var isString = typeof input === 'string' || input instanceof String;\n\n  if (!isString) {\n    throw new TypeError('This library (validator.js) validates strings only');\n  }\n}\nmodule.exports = exports['default'];\n\n\n// WEBPACK FOOTER //\n// ./node_modules/validator/lib/util/assertString.js"],"sourceRoot":""}