{"version":3,"sources":["webpack:///route-confirm-account.chunk.1d5aa.js","webpack:///./routes/confirm-account/components/confirm-account-form.js","webpack:///./routes/confirm-account/components/confirm-account-form-container.js","webpack:///./routes/confirm-account/index.js"],"names":["webpackJsonp","Vobf","module","__webpack_exports__","__webpack_require__","_possibleConstructorReturn","self","call","ReferenceError","_inherits","subClass","superClass","TypeError","prototype","Object","create","constructor","value","enumerable","writable","configurable","setPrototypeOf","__proto__","confirm_account_form_container__classCallCheck","instance","Constructor","confirm_account_form_container__possibleConstructorReturn","confirm_account_form_container__inherits","confirm_account__classCallCheck","confirm_account__possibleConstructorReturn","confirm_account__inherits","defineProperty","preact_min","flex_container","preact_router_es","classnames","classnames_default","n","form_inputs","toast","_ref","class","_ref2","style","_ref3","_ref4","confirm_account_form_ConfirmAccountForm","_Component","ConfirmAccountForm","this","apply","arguments","render","props","formClasses","has-error","hasError","btnClasses","loading","error","active","showServerError","serverError","confirmationNumber","onChange","handleConfirmationNumberChange","onClick","handleConfirmAccount","confirm_account_form_container_ConfirmAccountFormContainer","ConfirmAccountFormContainer","_this","_handleConfirmationNumberChange","bind","_handleConfirmAccount","state","confirmAccountSuccess","e","setState","target","_this2","fetch","email","method","then","resp","json","token","handleLoginSuccess","user","isNaN","length","confirm_account_ConfirmAccount","ConfirmAccount","formRail"],"mappings":"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","file":"route-confirm-account.chunk.1d5aa.js","sourcesContent":["webpackJsonp([6],{\n\n/***/ \"Vobf\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\nObject.defineProperty(__webpack_exports__, \"__esModule\", { value: true });\n\n// EXTERNAL MODULE: ./node_modules/preact/dist/preact.min.js\nvar preact_min = __webpack_require__(\"EBst\");\nvar preact_min_default = /*#__PURE__*/__webpack_require__.n(preact_min);\n\n// EXTERNAL MODULE: ./components/flex-container/index.js\nvar flex_container = __webpack_require__(\"o5xd\");\n\n// EXTERNAL MODULE: ./node_modules/preact-router/dist/preact-router.es.js\nvar preact_router_es = __webpack_require__(\"y+SO\");\n\n// EXTERNAL MODULE: ./node_modules/classnames/index.js\nvar classnames = __webpack_require__(\"HW6M\");\nvar classnames_default = /*#__PURE__*/__webpack_require__.n(classnames);\n\n// EXTERNAL MODULE: ./components/form-inputs/index.js\nvar form_inputs = __webpack_require__(\"AM5m\");\n\n// EXTERNAL MODULE: ./components/toast.js\nvar toast = __webpack_require__(\"r33O\");\n\n// CONCATENATED MODULE: ./routes/confirm-account/components/confirm-account-form.js\n\n\nfunction _classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction _possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction _inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\n\nvar _ref = Object(preact_min[\"h\"])(\n   'h1',\n   { 'class': 'text-center' },\n   'Confirm Account'\n);\n\nvar _ref2 = Object(preact_min[\"h\"])('i', { 'class': 'icon icon-3x icon-mail', style: 'width: 100%;margin: 0 auto;' });\n\nvar _ref3 = Object(preact_min[\"h\"])(\n   'p',\n   { 'class': 'text-center' },\n   'We sent you an email. Please enter the six-digit number below to confirm your account.'\n);\n\nvar _ref4 = Object(preact_min[\"h\"])(\n   'p',\n   { 'class': 'form-input-hint' },\n   'Please enter a six-digit number'\n);\n\nvar confirm_account_form_ConfirmAccountForm = function (_Component) {\n   _inherits(ConfirmAccountForm, _Component);\n\n   function ConfirmAccountForm() {\n      _classCallCheck(this, ConfirmAccountForm);\n\n      return _possibleConstructorReturn(this, _Component.apply(this, arguments));\n   }\n\n   ConfirmAccountForm.prototype.render = function render(props) {\n      var formClasses = classnames_default()('form-group', {\n         'has-error': props.hasError\n      });\n      var btnClasses = classnames_default()('btn', 'btn-primary', 'centered', 'mt-2', {\n         'loading': props.loading\n      });\n      return Object(preact_min[\"h\"])(\n         'div',\n         { 'class': formClasses },\n         _ref,\n         _ref2,\n         _ref3,\n         Object(preact_min[\"h\"])(\n            toast[\"a\" /* Toast */],\n            { error: true, active: props.showServerError },\n            props.serverError\n         ),\n         Object(preact_min[\"h\"])(form_inputs[\"b\" /* TextInput */], {\n            value: props.confirmationNumber,\n            onChange: props.handleConfirmationNumberChange\n         }),\n         _ref4,\n         Object(preact_min[\"h\"])(\n            'button',\n            {\n               'class': btnClasses,\n               onClick: props.handleConfirmAccount\n            },\n            'Confirm Account'\n         )\n      );\n   };\n\n   return ConfirmAccountForm;\n}(preact_min[\"Component\"]);\n\n\n// CONCATENATED MODULE: ./routes/confirm-account/components/confirm-account-form-container.js\n\n\nfunction confirm_account_form_container__classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction confirm_account_form_container__possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction confirm_account_form_container__inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\nvar confirm_account_form_container_ConfirmAccountFormContainer = function (_Component) {\n   confirm_account_form_container__inherits(ConfirmAccountFormContainer, _Component);\n\n   function ConfirmAccountFormContainer(props) {\n      confirm_account_form_container__classCallCheck(this, ConfirmAccountFormContainer);\n\n      var _this = confirm_account_form_container__possibleConstructorReturn(this, _Component.call(this, props));\n\n      _this._handleConfirmationNumberChange = _this._handleConfirmationNumberChange.bind(_this);\n      _this._handleConfirmAccount = _this._handleConfirmAccount.bind(_this);\n\n      _this.state = {\n         confirmationNumber: '',\n         serverError: '',\n         showServerError: false,\n         confirmAccountSuccess: false,\n         loading: false\n      };\n      return _this;\n   }\n\n   ConfirmAccountFormContainer.prototype._handleConfirmationNumberChange = function _handleConfirmationNumberChange(e) {\n      this.setState({ confirmationNumber: e.target.value });\n   };\n\n   ConfirmAccountFormContainer.prototype._handleConfirmAccount = function _handleConfirmAccount() {\n      var _this2 = this;\n\n      this.setState({ loading: true });\n\n      fetch(\"https://erikdgustafson.com/api/!confirmUser?\" + this.props.email + \"&+\" + this.state.confirmationNumber, { method: \"POST\" }).then(function (resp) {\n         return resp.json();\n      }).then(function (json) {\n         if (json.error) {\n            _this2.setState({\n               // display errors and remove loading spinner\n               serverError: json.error,\n               showServerError: true,\n               loading: false\n            });\n         } else if (json.token) {\n            // remove loading spinner\n            // set loginSuccess flag to true to trigger route change to 'Profile'\n            // FIXME - the above feels like a hack. \n            // might be time to add a redux-style store?\n            _this2.setState({ loading: false, confirmAccountSuccess: true });\n            // send event up to set global app state with logged in user\n            _this2.props.handleLoginSuccess(json.user, json.token);\n         }\n      }).then(function () {\n         if (_this2.state.confirmAccountSuccess) {\n            Object(preact_router_es[\"c\" /* route */])('/profile', true);\n         }\n      });\n   };\n\n   // TODO - hasError below should be a method called as...\n   //\n   // hasError={ this._hasError(this.state.confirmationNumber) }\n   // \n   // ...or something like that.\n\n   ConfirmAccountFormContainer.prototype.render = function render(props) {\n      return Object(preact_min[\"h\"])(confirm_account_form_ConfirmAccountForm, {\n\n         confirmationNumber: this.state.confirmationNumber,\n         handleConfirmationNumberChange: this._handleConfirmationNumberChange,\n\n         hasError: this.state.confirmationNumber && (isNaN(this.state.confirmationNumber) || !(this.state.confirmationNumber.length === 6)) ? true : false,\n\n         serverError: this.state.serverError,\n         showServerError: this.state.showServerError,\n\n         loading: this.state.loading,\n         handleConfirmAccount: this._handleConfirmAccount\n\n      });\n   };\n\n   return ConfirmAccountFormContainer;\n}(preact_min[\"Component\"]);\n\n\n// CONCATENATED MODULE: ./node_modules/babel-loader/lib?{\"babelrc\":false,\"presets\":[[\"/home/erik/loves-wake/node_modules/babel-preset-env/lib/index.js\",{\"loose\":true,\"uglify\":true,\"modules\":false,\"targets\":{\"browsers\":[\"> 1%\",\"last 2 versions\",\"IE >= 9\"]},\"exclude\":[\"transform-regenerator\",\"transform-es2015-typeof-symbol\"]}],\"/home/erik/loves-wake/node_modules/babel-preset-stage-1/lib/index.js\"],\"plugins\":[\"/home/erik/loves-wake/node_modules/babel-plugin-transform-object-assign/lib/index.js\",\"/home/erik/loves-wake/node_modules/babel-plugin-transform-decorators-legacy/lib/index.js\",\"/home/erik/loves-wake/node_modules/babel-plugin-transform-react-constant-elements/lib/index.js\",\"/home/erik/loves-wake/node_modules/babel-plugin-transform-react-remove-prop-types/lib/index.js\",[\"/home/erik/loves-wake/node_modules/babel-plugin-transform-react-jsx/lib/index.js\",{\"pragma\":\"h\"}],[\"/home/erik/loves-wake/node_modules/babel-plugin-jsx-pragmatic/jsx-pragmatic.js\",{\"module\":\"preact\",\"export\":\"h\",\"import\":\"h\"}]]}!./routes/confirm-account/index.js\n\n\nfunction confirm_account__classCallCheck(instance, Constructor) { if (!(instance instanceof Constructor)) { throw new TypeError(\"Cannot call a class as a function\"); } }\n\nfunction confirm_account__possibleConstructorReturn(self, call) { if (!self) { throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\"); } return call && (typeof call === \"object\" || typeof call === \"function\") ? call : self; }\n\nfunction confirm_account__inherits(subClass, superClass) { if (typeof superClass !== \"function\" && superClass !== null) { throw new TypeError(\"Super expression must either be null or a function, not \" + typeof superClass); } subClass.prototype = Object.create(superClass && superClass.prototype, { constructor: { value: subClass, enumerable: false, writable: true, configurable: true } }); if (superClass) Object.setPrototypeOf ? Object.setPrototypeOf(subClass, superClass) : subClass.__proto__ = superClass; }\n\n\n\n\n\n\nvar confirm_account_ConfirmAccount = function (_Component) {\n   confirm_account__inherits(ConfirmAccount, _Component);\n\n   function ConfirmAccount() {\n      confirm_account__classCallCheck(this, ConfirmAccount);\n\n      return confirm_account__possibleConstructorReturn(this, _Component.apply(this, arguments));\n   }\n\n   ConfirmAccount.prototype.render = function render(props) {\n      return Object(preact_min[\"h\"])(flex_container[\"a\" /* FlexContainer */], {\n         formRail: Object(preact_min[\"h\"])(confirm_account_form_container_ConfirmAccountFormContainer, {\n            email: props.email,\n            handleLoginSuccess: function handleLoginSuccess(user, token) {\n               return props.handleLoginSuccess(user, token);\n            }\n         })\n      });\n   };\n\n   return ConfirmAccount;\n}(preact_min[\"Component\"]);\n\n/* harmony default export */ var confirm_account = __webpack_exports__[\"default\"] = (confirm_account_ConfirmAccount);\n\n/***/ })\n\n});\n\n\n// WEBPACK FOOTER //\n// route-confirm-account.chunk.1d5aa.js","import { Component } from 'preact';\nimport classNames from 'classnames';\n\nimport { TextInput } from '../../../components/form-inputs/'\nimport { Toast } from '../../../components/toast';\n\nclass ConfirmAccountForm extends Component {\n   render (props) {\n      let formClasses = classNames(\n         'form-group',\n         {\n            'has-error': props.hasError\n         }\n      );\n      let btnClasses = classNames(\n         'btn', 'btn-primary', 'centered', 'mt-2',\n         {\n            'loading': props.loading\n         }\n      );\n      return (\n         <div class={formClasses}>\n\n            <h1 class=\"text-center\">Confirm Account</h1>\n\n            <i class=\"icon icon-3x icon-mail\" style=\"width: 100%;margin: 0 auto;\"/>\n\n            <p class=\"text-center\">\n               We sent you an email. Please enter the six-digit\n               number below to confirm your account.\n            </p>\n\n\n            <Toast error active={props.showServerError}>\n               {props.serverError}\n            </Toast>\n\n            <TextInput \n               value={ props.confirmationNumber }\n               onChange={ props.handleConfirmationNumberChange }\n            />\n\n            <p class=\"form-input-hint\">\n               Please enter a six-digit number\n            </p>\n\n            <button \n               class={ btnClasses }\n               onClick={ props.handleConfirmAccount }\n            >\n               Confirm Account\n            </button>\n\n         </div>\n      )\n   }\n}\n\nexport { ConfirmAccountForm };\n\n\n\n// WEBPACK FOOTER //\n// ./routes/confirm-account/components/confirm-account-form.js","import { Component } from 'preact';\nimport { route } from 'preact-router';\n\nimport { ConfirmAccountForm } from './confirm-account-form';\n\nclass ConfirmAccountFormContainer extends Component { \n   constructor (props) {\n      super(props);\n\n      this._handleConfirmationNumberChange = this._handleConfirmationNumberChange.bind(this);\n      this._handleConfirmAccount = this._handleConfirmAccount.bind(this);\n\n      this.state = {\n         confirmationNumber: '',\n         serverError: '',\n         showServerError: false,\n         confirmAccountSuccess: false,\n         loading: false\n      };\n   }\n\n   _handleConfirmationNumberChange (e) {\n      this.setState({ confirmationNumber: e.target.value });\n   }\n\n   _handleConfirmAccount () {\n      this.setState({ loading: true });\n\n      fetch(\"https://erikdgustafson.com/api/!confirmUser?\"\n         + this.props.email\n         + \"&+\"\n         + this.state.confirmationNumber,\n         { method: \"POST\" }\n      )\n      .then( (resp) => {\n         return resp.json();\n      })\n      .then( (json) => {\n         if (json.error) {\n            this.setState({ \n               // display errors and remove loading spinner\n               serverError: json.error, \n               showServerError: true,\n               loading: false\n            });\n\n         } else if (json.token) {\n            // remove loading spinner\n            // set loginSuccess flag to true to trigger route change to 'Profile'\n            // FIXME - the above feels like a hack. \n            // might be time to add a redux-style store?\n            this.setState({ loading: false, confirmAccountSuccess: true});\n            // send event up to set global app state with logged in user\n            this.props.handleLoginSuccess(json.user, json.token);\n         }\n      })\n      .then( () => {\n         if (this.state.confirmAccountSuccess) {\n            route('/profile', true);\n         }\n      });\n   }\n\n\n   // TODO - hasError below should be a method called as...\n   //\n   // hasError={ this._hasError(this.state.confirmationNumber) }\n   // \n   // ...or something like that.\n\n   render (props) {\n      return (\n         <ConfirmAccountForm\n\n            confirmationNumber={ this.state.confirmationNumber }\n            handleConfirmationNumberChange={ this._handleConfirmationNumberChange }\n\n            hasError={ \n               this.state.confirmationNumber \n                  && \n               (isNaN(this.state.confirmationNumber) \n                  || \n               !(this.state.confirmationNumber.length === 6)) \n                  ? true : false\n            }\n\n            serverError={ this.state.serverError }\n            showServerError={ this.state.showServerError }\n\n            loading={ this.state.loading }\n            handleConfirmAccount={ this._handleConfirmAccount }\n\n         />\n      )\n   }\n}\n\nexport { ConfirmAccountFormContainer };\n\n\n\n// WEBPACK FOOTER //\n// ./routes/confirm-account/components/confirm-account-form-container.js","import { h, Component } from 'preact';\n\nimport { FlexContainer } from '../../components/flex-container';\nimport { ConfirmAccountFormContainer } from './components/confirm-account-form-container';\n\nclass ConfirmAccount extends Component {\n   render (props) {\n      return (\n         <FlexContainer \n            formRail={ \n               <ConfirmAccountFormContainer \n                  email={ props.email }\n                  handleLoginSuccess={ (user, token) => props.handleLoginSuccess(user, token) }\n               /> \n            } \n         />\n      );\n   }\n}\n\nexport default ConfirmAccount;\n\n\n\n\n// WEBPACK FOOTER //\n// ./routes/confirm-account/index.js"],"sourceRoot":""}